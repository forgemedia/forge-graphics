var express=require("express"),http=require("http"),app=express(),server=http.createServer(app),io=require("socket.io").listen(server),debug=!0,general={},lowerThirds={};io.on("connection",function(e){console.log("  Client connected"),e.on("general",function(e){debug&&console.log("* general",e),general=e,io.sockets.emit("general",e)}),e.on("general:get",function(e){io.sockets.emit("general",general)}),e.on("lowerThirds",function(e){debug&&console.log("* lowerThirds",e),lowerThirds=e,io.sockets.emit("lowerThirds",e)}),e.on("lowerThirds:get",function(e){io.sockets.emit("lowerThirds",lowerThirds)})}),app.use(express.static(__dirname+"/public")),app.use("/bower_components",express.static(__dirname+"/bower_components")),app.use("/node_modules",express.static(__dirname+"/node_modules")),server.listen(3e3),console.log("Forge Graphics Server"),debug&&console.log("* Debug on"),console.log("  Go to [hostname]:3000/dashboard to control"),console.log("  run 'play 1-1 [html] http://[hostname]:3000' in CasparCG\n");